---
title: "Herramientas Libres para trabajar con datos LiDAR"
date: "2013-07-29"
categories: 
  - "cartography"
  - "foss"
  - "gis"
authors: [ "roberto-antolin" ]
---

En los últimos años ha proliferado el uso del [LiDAR](http://es.wikipedia.org/wiki/LIDAR) como técnica topográfica. Básicamente, consiste en un telémetro láser que mide el tiempo que tarda una pulso láser en ir y volver después de haber rebotado en un objeto. De este modo consigue hallar la distancia entre el instrumento y el objeto. Es decir, es sencillamente un distanciómetro, pero con la particularidad de que puede llegar a medir unos 100000 puntos por segundo (100 MHz). Si, además, incorporamos a los equipos de medición un GPS que nos dé la posición y un sistema inercial que nos de la orientación si estamos en movimiento, podemos dar coordenadas globales, normalmente en el sistema WGS84, a todos los puntos medidos. Por tanto, tendremos lo que se denominan nubes de puntos de los cuales conoceremos su posición en un sistema de referencia global, además de otras características relativas al objeto, como la intensidad o diferentes ecos de retornos, o referentes a la medición como ángulo de emisión del pulso, tiempo o distancia relativa al sensor.

Las compañías que desarrollan instrumentación LiDAR, ya sean telémetros aerotransportados, dando lugar a lo que se denomina en inglés _Airborne Laser Scanning_ (ALS), o telémetros terrestes, _Terrestrial Laser Scanning_ (TLS), también desarrollan su propio software destinado a:

1. Extraer los datos del equipo de medida y ofrecer los datos en algún formato propio o, al menos, conocido.
2. En algunos casos, hacer post-proceso de dichos datos y obtener productos cartográficos finales.

Sin embargo, como en el ecosistema de los GIS, existe un software privativo que monopoliza casi todo el mercado del software para realizar los trabajos de post-proceso. No voy a dar el nombre de ninguno de estos paquetes porque el objetivo de esta entrada es justamente la contraria, exponer las posibilidades existentes para utilizar software libre a la hora de trabajar con datos LiDAR.

Lamentablemente, para extraer los datos de la mayoría de los equipos actuales no hay alternativas y necesitamos utilizar obligatoriamente software privativo. Comprar la licencia no es el verdadero problema, porque si tenemos dinero para comprar un equipo que cuesta varias decenas de miles de euros es que también podemos comprar al menos una licencia por un par de miles. Lo peor es lo que verdaderamente implica el software privativo, es decir, que no eres libre de hacer lo que quieras con producto adquirido. Sin embargo, si alguien quiere hacerse un telémetro láser, puede utilizar el [módulo para la captura de datos](http://docs.pointclouds.org/trunk/group__io.html) de las librerías [PCL](http://pointclouds.org/), ya que soporta algunos dispositivos conocidos. Pero sobre la librería PCL y otras más hablaremos más datelladamente en otra entrada. Además, en la mayoría de los casos, cuando podamos acceder a datos LiDAR, estos estarán ya en un fomato conocido. Lo lógico es que obtengamos los datos en el formato [LAS](http://lidar.com.es/2010/11/18/formato-las-el-estandar-de-datos-lidar/) que es el formato estándar que define la [ASPRS](http://asprs.org/Committee-General/LASer-LAS-File-Format-Exchange-Activities.html) (American Society for Photogrammetry and Remote Sensing).

Hay varias librerías libres para la lectura y escritura de archivos en este formato LAS. La decana de ellas es [LASlib](http://www.cs.unc.edu/~isenburg/lastools/). Está desarrollada y mantenida por Martin Isenburg y está escrita en C++. Está licenciada bajo LGPL, por lo que se puede utilizar en otros paquetes, aunque sean privativos. Al descargar estas librerías y compilarlas genera unas herramientas llamadas _LAStools_ que sirven para la gestión de archivos LAS (**las2las**, **lasmerge**), para creación de LAS a partir de archivos de texto (**txt2las**) o archivos de texto a partir de LAS (**las2txt**), para dar información sobre archivos (**lasinfo**, **lasprecision**, **lasdiff**) o para crear un índice espacial de los puntos dentro de los archivos (**lasindex**). En las últimas versiones, también se crea la herramienta **laszip** que sirve para comprimir archivo LAS. El formato de salida es [LAZ](http://www.laszip.org/) y el archivo de comprimido ocupa SOLO entre el 7% y 20% del tamaño del archivo original. A todo esto hay que añadir que con la librería LASlib también se distribuye otra librería para leer y escribir formatos LAZ, también en C++ y también con licencia LGPL. Para los usuarios de windows, además, están disponibles otras herramientas precompiladas, de las cuales no voy a dar detalles porque no son libres, sino que son _shareware_.

De la librería LASlib se hizo un _fork_ y nació la librería [libLAS](http://www.liblas.org), que está bajo el auspicio de [OSGeo](http://wiki.osgeo.org/wiki/Cap%C3%ADtulo_Local_de_la_comunidad_hispanohablante). También escrita en C++ pero incorporan _bindings_ para una gran cantidad de lenguajes de programación. También incorpora herramientas para la gestión de archivos en formato LAS y texto, que se llaman de igual manera que las LAStools, aunque la utilización de los comandos pueda variar. Las diferencias que existen actualmente entre ambas librerías se pueden encontrar [aquí](http://www.liblas.org/lastools.html).

La librería [SPDLib](http://www.spdlib.org/doku.php) es bastante reciente. Tanto es así que empezó a desarrollarse en el verano de 2011. El formato estándar que utiliza para trabajar con datos LiDAR se denomina precisamente SPD (Sorted Pulse Data) y está basado en el formato [HDF](https://en.wikipedia.org/wiki/Hierarchical_Data_Format). Es un formato de datos ordenados e indexado que está optimizado para el acceso rápido a los datos y en el que es posible trabajar con toda la señal del pulso de retorno, en inglés [full waveform](https://www.e-education.psu.edu/lidar/book/export/html/1873), no sólo con ecos discretos, como hace las librerías anteriores. Y precisamente ésta es una de sus grandes virtudes. Por lo demás, está en consonancia con las librerías ya vistas. Está desarrollada en C++, con _bindings_ para python e [IDL](https://en.wikipedia.org/wiki/IDL_(programming_language)), y con licencia GPL. Al compilar se crean una serie de herramientas para la gestión, manipulación e información de archivos SPD, así como una herramienta imprescindible para transformar entre formatos LAS y SPD. Otra de las ventajas que presenta es que incorpora utilidades para generar modelos digitales en cualquier formato soportado por gdal, y para aplicaciones forestales. ¡Todas ellas libres! Sin embargo, al ser desarrollada principalmente por una sola persona y ser tan reciente, uno de los problemas que presenta es la escasa y, en algunos casos, inexacta documentación.

Sin duda, existen más librerías capaces de trabajar con datos LiDAR pero con otros propósitos distintos a los que hemos cubierto aquí. Las intentaremos tratar en otras entradas. Manteneos atentos.

**PD**: Mientras escribo estas líneas me llega un tuit en el que hablan de otra libreria en python para leer y escribir datos LiDAR en formatos LAS. Se llaman [laspy](http://laspy.org) :)

<blockquote class="twitter-tweet">I don't process LIDAR much but Laspy totally rocks and only needs Numpy (PyPi compatible): <a href="http://t.co/CDjthmUDqk">http://t.co/CDjthmUDqk</a><div></div>— GeospatialPython.com (@SpatialPython) <a href="https://twitter.com/SpatialPython/statuses/361524410919821312">July 28, 2013</a></blockquote>
